(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;

(function () {

////////////////////////////////////////////////////////////////////////////
//                                                                        //
// packages/mrt:csv-to-collection/CsvToCollection.js                      //
//                                                                        //
////////////////////////////////////////////////////////////////////////////
                                                                          //
// Generated by CoffeeScript 1.7.1                                        // 1
(function() {                                                             // 2
  var CSV;                                                                // 3
                                                                          // 4
  this.c2c = {                                                            // 5
    createCollection: function(publicCsvPath) {                           // 6
      return new Meteor.Collection(this.getFilename(publicCsvPath));      // 7
    },                                                                    // 8
    getFilename: function(path) {                                         // 9
      return (path.split("/")).pop();                                     // 10
    }                                                                     // 11
  };                                                                      // 12
                                                                          // 13
  if (Meteor.isServer) {                                                  // 14
    CSV = Npm.require("comma-separated-values");                          // 15
    this.c2c.addCsvStringToCollection = function(collection, csvString) { // 16
      var doc, _i, _len, _ref, _results;                                  // 17
      _ref = (new CSV(csvString, {                                        // 18
        header: true,                                                     // 19
        cast: false,                                                      // 20
        line: "\n"                                                        // 21
      })).parse();                                                        // 22
      _results = [];                                                      // 23
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {                 // 24
        doc = _ref[_i];                                                   // 25
        _results.push(collection.insert(doc));                            // 26
      }                                                                   // 27
      return _results;                                                    // 28
    };                                                                    // 29
    this.c2c.addPublicCsvToCollection = function(collection, path) {      // 30
      return this.addCsvStringToCollection(collection, String((Npm.require("fs")).readFileSync("../client/app/" + path)));
    };                                                                    // 32
  }                                                                       // 33
                                                                          // 34
}).call(this);                                                            // 35
                                                                          // 36
////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
Package['mrt:csv-to-collection'] = {};

})();

//# sourceMappingURL=mrt_csv-to-collection.js.map
